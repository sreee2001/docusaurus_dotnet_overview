"use strict";(self.webpackChunkdotnet_overview=self.webpackChunkdotnet_overview||[]).push([[8362],{1649:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"Topics/Microservices/MicroservicesArchitecture","title":"MicroservicesArchitecture","description":"44. Microservices Architecture","source":"@site/docs/Topics/10_Microservices/44_MicroservicesArchitecture.md","sourceDirName":"Topics/10_Microservices","slug":"/Topics/Microservices/MicroservicesArchitecture","permalink":"/docusaurus_dotnet_overview/docs/Topics/Microservices/MicroservicesArchitecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":44,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HealthChecks","permalink":"/docusaurus_dotnet_overview/docs/Topics/DevOps_and_CI_CD/HealthChecks"},"next":{"title":"APIGateway","permalink":"/docusaurus_dotnet_overview/docs/Topics/Microservices/APIGateway"}}');var i=r(4848),t=r(8453);const s={},c=void 0,a={},l=[{value:"44. Microservices Architecture",id:"44-microservices-architecture",level:2},{value:"Short Introduction",id:"short-introduction",level:2},{value:"Official Definition",id:"official-definition",level:2},{value:"Setup/Usage with .NET 8+ Code",id:"setupusage-with-net-8-code",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"When to Use vs When Not to Use",id:"when-to-use-vs-when-not-to-use",level:2},{value:"Market Alternatives &amp; Pros/Cons",id:"market-alternatives--proscons",level:3},{value:"Alternatives:",id:"alternatives",level:3},{value:"Pros:",id:"pros",level:3},{value:"Cons:",id:"cons",level:3},{value:"Complete Runnable Sample",id:"complete-runnable-sample",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"44-microservices-architecture",children:"44. Microservices Architecture"}),"\n",(0,i.jsx)(n.h2,{id:"short-introduction",children:"Short Introduction"}),"\n",(0,i.jsx)(n.p,{children:"Microservices architecture is a design approach that structures an application as a collection of loosely coupled, independently deployable services. Each service is responsible for a specific business capability and communicates with other services through well-defined APIs, enabling teams to develop, deploy, and scale services independently."}),"\n",(0,i.jsx)(n.h2,{id:"official-definition",children:"Official Definition"}),"\n",(0,i.jsx)(n.p,{children:"Microservices architecture is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery."}),"\n",(0,i.jsx)(n.h2,{id:"setupusage-with-net-8-code",children:"Setup/Usage with .NET 8+ Code"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Basic Microservice Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// BookingService/Program.cs\r\nusing Microsoft.AspNetCore.Authentication.JwtBearer;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nvar builder = WebApplication.CreateBuilder(args);\r\n\r\n// Add services\r\nbuilder.Services.AddDbContext<BookingDbContext>(options =>\r\n    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));\r\n\r\nbuilder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)\r\n    .AddJwtBearer(options =>\r\n    {\r\n        options.Authority = builder.Configuration["Auth:Authority"];\r\n        options.Audience = builder.Configuration["Auth:Audience"];\r\n    });\r\n\r\nbuilder.Services.AddAuthorization();\r\nbuilder.Services.AddControllers();\r\nbuilder.Services.AddEndpointsApiExplorer();\r\nbuilder.Services.AddSwaggerGen();\r\n\r\n// Add service-specific dependencies\r\nbuilder.Services.AddScoped<IBookingRepository, BookingRepository>();\r\nbuilder.Services.AddScoped<IBookingService, BookingService>();\r\nbuilder.Services.AddHttpClient<IRoomService, RoomServiceClient>(client =>\r\n{\r\n    client.BaseAddress = new Uri(builder.Configuration["Services:RoomService:BaseUrl"]);\r\n});\r\n\r\n// Add health checks\r\nbuilder.Services.AddHealthChecks()\r\n    .AddDbContext<BookingDbContext>()\r\n    .AddUrlGroup(new Uri($"{builder.Configuration["Services:RoomService:BaseUrl"]}/health"), "room-service");\r\n\r\nvar app = builder.Build();\r\n\r\n// Configure pipeline\r\nif (app.Environment.IsDevelopment())\r\n{\r\n    app.UseSwagger();\r\n    app.UseSwaggerUI();\r\n}\r\n\r\napp.UseAuthentication();\r\napp.UseAuthorization();\r\napp.MapControllers();\r\napp.MapHealthChecks("/health");\r\n\r\napp.Run();\r\n\r\n// Models/Booking.cs\r\npublic class Booking\r\n{\r\n    public int Id { get; set; }\r\n    public string CustomerId { get; set; } = string.Empty;\r\n    public int RoomId { get; set; }\r\n    public DateTime CheckIn { get; set; }\r\n    public DateTime CheckOut { get; set; }\r\n    public decimal TotalAmount { get; set; }\r\n    public BookingStatus Status { get; set; }\r\n    public DateTime CreatedAt { get; set; }\r\n}\r\n\r\npublic enum BookingStatus\r\n{\r\n    Pending,\r\n    Confirmed,\r\n    Cancelled,\r\n    CheckedIn,\r\n    CheckedOut\r\n}\r\n\r\n// Controllers/BookingsController.cs\r\n[ApiController]\r\n[Route("api/[controller]")]\r\n[Authorize]\r\npublic class BookingsController : ControllerBase\r\n{\r\n    private readonly IBookingService _bookingService;\r\n    private readonly IRoomService _roomService;\r\n    private readonly ILogger<BookingsController> _logger;\r\n\r\n    public BookingsController(\r\n        IBookingService bookingService,\r\n        IRoomService roomService,\r\n        ILogger<BookingsController> logger)\r\n    {\r\n        _bookingService = bookingService;\r\n        _roomService = roomService;\r\n        _logger = logger;\r\n    }\r\n\r\n    [HttpPost]\r\n    public async Task<ActionResult<BookingDto>> CreateBooking([FromBody] CreateBookingRequest request)\r\n    {\r\n        try\r\n        {\r\n            // Check room availability with Room Service\r\n            var roomAvailability = await _roomService.CheckAvailabilityAsync(\r\n                request.RoomId, request.CheckIn, request.CheckOut);\r\n\r\n            if (!roomAvailability.IsAvailable)\r\n            {\r\n                return BadRequest("Room is not available for the selected dates");\r\n            }\r\n\r\n            var booking = await _bookingService.CreateBookingAsync(request);\r\n            return Ok(booking);\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            _logger.LogError(ex, "Error creating booking");\r\n            return StatusCode(500, "An error occurred while creating the booking");\r\n        }\r\n    }\r\n\r\n    [HttpGet("{id}")]\r\n    public async Task<ActionResult<BookingDto>> GetBooking(int id)\r\n    {\r\n        var booking = await _bookingService.GetBookingByIdAsync(id);\r\n        if (booking == null)\r\n        {\r\n            return NotFound();\r\n        }\r\n\r\n        return Ok(booking);\r\n    }\r\n\r\n    [HttpGet("customer/{customerId}")]\r\n    public async Task<ActionResult<IEnumerable<BookingDto>>> GetCustomerBookings(string customerId)\r\n    {\r\n        var bookings = await _bookingService.GetBookingsByCustomerAsync(customerId);\r\n        return Ok(bookings);\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Service Communication Pattern:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// Services/RoomServiceClient.cs\r\npublic interface IRoomService\r\n{\r\n    Task<RoomAvailabilityResponse> CheckAvailabilityAsync(int roomId, DateTime checkIn, DateTime checkOut);\r\n    Task<RoomDetailsResponse> GetRoomDetailsAsync(int roomId);\r\n}\r\n\r\npublic class RoomServiceClient : IRoomService\r\n{\r\n    private readonly HttpClient _httpClient;\r\n    private readonly ILogger<RoomServiceClient> _logger;\r\n\r\n    public RoomServiceClient(HttpClient httpClient, ILogger<RoomServiceClient> logger)\r\n    {\r\n        _httpClient = httpClient;\r\n        _logger = logger;\r\n    }\r\n\r\n    public async Task<RoomAvailabilityResponse> CheckAvailabilityAsync(int roomId, DateTime checkIn, DateTime checkOut)\r\n    {\r\n        try\r\n        {\r\n            var request = new\r\n            {\r\n                RoomId = roomId,\r\n                CheckIn = checkIn,\r\n                CheckOut = checkOut\r\n            };\r\n\r\n            var response = await _httpClient.PostAsJsonAsync("/api/rooms/check-availability", request);\r\n            response.EnsureSuccessStatusCode();\r\n\r\n            var result = await response.Content.ReadFromJsonAsync<RoomAvailabilityResponse>();\r\n            return result ?? new RoomAvailabilityResponse { IsAvailable = false };\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            _logger.LogError(ex, "Error checking room availability for room {RoomId}", roomId);\r\n            throw;\r\n        }\r\n    }\r\n\r\n    public async Task<RoomDetailsResponse> GetRoomDetailsAsync(int roomId)\r\n    {\r\n        try\r\n        {\r\n            var response = await _httpClient.GetAsync($"/api/rooms/{roomId}");\r\n            response.EnsureSuccessStatusCode();\r\n\r\n            var result = await response.Content.ReadFromJsonAsync<RoomDetailsResponse>();\r\n            return result ?? throw new InvalidOperationException("Room not found");\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            _logger.LogError(ex, "Error getting room details for room {RoomId}", roomId);\r\n            throw;\r\n        }\r\n    }\r\n}\r\n\r\n// DTOs/ServiceDtos.cs\r\npublic class RoomAvailabilityResponse\r\n{\r\n    public bool IsAvailable { get; set; }\r\n    public decimal PricePerNight { get; set; }\r\n    public string Message { get; set; } = string.Empty;\r\n}\r\n\r\npublic class RoomDetailsResponse\r\n{\r\n    public int Id { get; set; }\r\n    public string Name { get; set; } = string.Empty;\r\n    public string Type { get; set; } = string.Empty;\r\n    public decimal PricePerNight { get; set; }\r\n    public int MaxOccupancy { get; set; }\r\n    public List<string> Amenities { get; set; } = new();\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Large-Scale Applications"}),": Complex systems with multiple business domains"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Team Autonomy"}),": Different teams working on different parts of the system"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Technology Diversity"}),": Different services using different technologies or databases"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Independent Scaling"}),": Services with different performance requirements"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fault Isolation"}),": Preventing failures in one service from affecting others"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Continuous Deployment"}),": Independent release cycles for different services"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use-vs-when-not-to-use",children:"When to Use vs When Not to Use"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use Microservices when:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Application has clear business domain boundaries"}),"\n",(0,i.jsx)(n.li,{children:"Team is large enough to support multiple services"}),"\n",(0,i.jsx)(n.li,{children:"Need independent scaling and deployment"}),"\n",(0,i.jsx)(n.li,{children:"Different parts of system have different technology requirements"}),"\n",(0,i.jsx)(n.li,{children:"High availability and fault tolerance are critical"}),"\n",(0,i.jsx)(n.li,{children:"Organization can handle operational complexity"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Consider alternatives when:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Small team or simple application"}),"\n",(0,i.jsx)(n.li,{children:"Unclear domain boundaries"}),"\n",(0,i.jsx)(n.li,{children:"Limited operational expertise"}),"\n",(0,i.jsx)(n.li,{children:"Network latency is critical"}),"\n",(0,i.jsx)(n.li,{children:"Strong consistency requirements across domains"}),"\n",(0,i.jsx)(n.li,{children:"Development speed is more important than scalability"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"market-alternatives--proscons",children:"Market Alternatives & Pros/Cons"}),"\n",(0,i.jsx)(n.h3,{id:"alternatives",children:"Alternatives:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monolithic Architecture"}),": Single deployable unit"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modular Monolith"}),": Modular structure within single deployment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service-Oriented Architecture (SOA)"}),": Enterprise service approach"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Serverless Functions"}),": Function-as-a-Service approach"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event-Driven Architecture"}),": Async communication patterns"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"pros",children:"Pros:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Independent development and deployment"}),"\n",(0,i.jsx)(n.li,{children:"Technology diversity and flexibility"}),"\n",(0,i.jsx)(n.li,{children:"Better fault isolation"}),"\n",(0,i.jsx)(n.li,{children:"Easier scaling of individual components"}),"\n",(0,i.jsx)(n.li,{children:"Team autonomy and ownership"}),"\n",(0,i.jsx)(n.li,{children:"Better alignment with business domains"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cons",children:"Cons:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Increased operational complexity"}),"\n",(0,i.jsx)(n.li,{children:"Network latency and communication overhead"}),"\n",(0,i.jsx)(n.li,{children:"Data consistency challenges"}),"\n",(0,i.jsx)(n.li,{children:"Testing complexity"}),"\n",(0,i.jsx)(n.li,{children:"Service discovery and configuration management"}),"\n",(0,i.jsx)(n.li,{children:"Higher infrastructure costs"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"complete-runnable-sample",children:"Complete Runnable Sample"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Complete Microservices Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// Shared/Events/DomainEvents.cs\r\npublic abstract class DomainEvent\r\n{\r\n    public DateTime OccurredOn { get; protected set; } = DateTime.UtcNow;\r\n    public string EventType => GetType().Name;\r\n}\r\n\r\npublic class BookingCreatedEvent : DomainEvent\r\n{\r\n    public int BookingId { get; set; }\r\n    public string CustomerId { get; set; } = string.Empty;\r\n    public int RoomId { get; set; }\r\n    public DateTime CheckIn { get; set; }\r\n    public DateTime CheckOut { get; set; }\r\n    public decimal TotalAmount { get; set; }\r\n}\r\n\r\npublic class BookingCancelledEvent : DomainEvent\r\n{\r\n    public int BookingId { get; set; }\r\n    public string CustomerId { get; set; } = string.Empty;\r\n    public string Reason { get; set; } = string.Empty;\r\n}\r\n\r\n// Shared/Infrastructure/EventBus.cs\r\npublic interface IEventBus\r\n{\r\n    Task PublishAsync<T>(T @event) where T : DomainEvent;\r\n    void Subscribe<T>(Func<T, Task> handler) where T : DomainEvent;\r\n}\r\n\r\npublic class InMemoryEventBus : IEventBus\r\n{\r\n    private readonly Dictionary<Type, List<Func<object, Task>>> _handlers = new();\r\n    private readonly ILogger<InMemoryEventBus> _logger;\r\n\r\n    public InMemoryEventBus(ILogger<InMemoryEventBus> logger)\r\n    {\r\n        _logger = logger;\r\n    }\r\n\r\n    public async Task PublishAsync<T>(T @event) where T : DomainEvent\r\n    {\r\n        var eventType = typeof(T);\r\n        if (_handlers.TryGetValue(eventType, out var handlers))\r\n        {\r\n            var tasks = handlers.Select(handler => handler(@event));\r\n            await Task.WhenAll(tasks);\r\n            _logger.LogInformation("Published event {EventType}", eventType.Name);\r\n        }\r\n    }\r\n\r\n    public void Subscribe<T>(Func<T, Task> handler) where T : DomainEvent\r\n    {\r\n        var eventType = typeof(T);\r\n        if (!_handlers.ContainsKey(eventType))\r\n        {\r\n            _handlers[eventType] = new List<Func<object, Task>>();\r\n        }\r\n\r\n        _handlers[eventType].Add(@event => handler((T)@event));\r\n        _logger.LogInformation("Subscribed to event {EventType}", eventType.Name);\r\n    }\r\n}\r\n\r\n// BookingService/Services/BookingService.cs\r\npublic interface IBookingService\r\n{\r\n    Task<BookingDto> CreateBookingAsync(CreateBookingRequest request);\r\n    Task<BookingDto?> GetBookingByIdAsync(int id);\r\n    Task<IEnumerable<BookingDto>> GetBookingsByCustomerAsync(string customerId);\r\n    Task<BookingDto> CancelBookingAsync(int id, string reason);\r\n}\r\n\r\npublic class BookingService : IBookingService\r\n{\r\n    private readonly IBookingRepository _repository;\r\n    private readonly IEventBus _eventBus;\r\n    private readonly IRoomService _roomService;\r\n    private readonly ILogger<BookingService> _logger;\r\n\r\n    public BookingService(\r\n        IBookingRepository repository,\r\n        IEventBus eventBus,\r\n        IRoomService roomService,\r\n        ILogger<BookingService> logger)\r\n    {\r\n        _repository = repository;\r\n        _eventBus = eventBus;\r\n        _roomService = roomService;\r\n        _logger = logger;\r\n    }\r\n\r\n    public async Task<BookingDto> CreateBookingAsync(CreateBookingRequest request)\r\n    {\r\n        try\r\n        {\r\n            // Validate room availability\r\n            var availability = await _roomService.CheckAvailabilityAsync(\r\n                request.RoomId, request.CheckIn, request.CheckOut);\r\n\r\n            if (!availability.IsAvailable)\r\n            {\r\n                throw new InvalidOperationException("Room is not available for the selected dates");\r\n            }\r\n\r\n            // Calculate total amount\r\n            var nights = (request.CheckOut - request.CheckIn).Days;\r\n            var totalAmount = nights * availability.PricePerNight;\r\n\r\n            // Create booking\r\n            var booking = new Booking\r\n            {\r\n                CustomerId = request.CustomerId,\r\n                RoomId = request.RoomId,\r\n                CheckIn = request.CheckIn,\r\n                CheckOut = request.CheckOut,\r\n                TotalAmount = totalAmount,\r\n                Status = BookingStatus.Pending,\r\n                CreatedAt = DateTime.UtcNow\r\n            };\r\n\r\n            await _repository.AddAsync(booking);\r\n            await _repository.SaveChangesAsync();\r\n\r\n            // Publish domain event\r\n            await _eventBus.PublishAsync(new BookingCreatedEvent\r\n            {\r\n                BookingId = booking.Id,\r\n                CustomerId = booking.CustomerId,\r\n                RoomId = booking.RoomId,\r\n                CheckIn = booking.CheckIn,\r\n                CheckOut = booking.CheckOut,\r\n                TotalAmount = booking.TotalAmount\r\n            });\r\n\r\n            _logger.LogInformation("Booking created successfully with ID {BookingId}", booking.Id);\r\n\r\n            return MapToDto(booking);\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            _logger.LogError(ex, "Error creating booking for customer {CustomerId}", request.CustomerId);\r\n            throw;\r\n        }\r\n    }\r\n\r\n    public async Task<BookingDto?> GetBookingByIdAsync(int id)\r\n    {\r\n        var booking = await _repository.GetByIdAsync(id);\r\n        return booking != null ? MapToDto(booking) : null;\r\n    }\r\n\r\n    public async Task<IEnumerable<BookingDto>> GetBookingsByCustomerAsync(string customerId)\r\n    {\r\n        var bookings = await _repository.GetByCustomerIdAsync(customerId);\r\n        return bookings.Select(MapToDto);\r\n    }\r\n\r\n    public async Task<BookingDto> CancelBookingAsync(int id, string reason)\r\n    {\r\n        var booking = await _repository.GetByIdAsync(id);\r\n        if (booking == null)\r\n        {\r\n            throw new InvalidOperationException("Booking not found");\r\n        }\r\n\r\n        if (booking.Status != BookingStatus.Pending && booking.Status != BookingStatus.Confirmed)\r\n        {\r\n            throw new InvalidOperationException("Cannot cancel booking in current status");\r\n        }\r\n\r\n        booking.Status = BookingStatus.Cancelled;\r\n        await _repository.SaveChangesAsync();\r\n\r\n        // Publish cancellation event\r\n        await _eventBus.PublishAsync(new BookingCancelledEvent\r\n        {\r\n            BookingId = booking.Id,\r\n            CustomerId = booking.CustomerId,\r\n            Reason = reason\r\n        });\r\n\r\n        _logger.LogInformation("Booking {BookingId} cancelled", booking.Id);\r\n\r\n        return MapToDto(booking);\r\n    }\r\n\r\n    private static BookingDto MapToDto(Booking booking)\r\n    {\r\n        return new BookingDto\r\n        {\r\n            Id = booking.Id,\r\n            CustomerId = booking.CustomerId,\r\n            RoomId = booking.RoomId,\r\n            CheckIn = booking.CheckIn,\r\n            CheckOut = booking.CheckOut,\r\n            TotalAmount = booking.TotalAmount,\r\n            Status = booking.Status.ToString(),\r\n            CreatedAt = booking.CreatedAt\r\n        };\r\n    }\r\n}\r\n\r\n// docker-compose.yml for multi-service setup\r\nversion: \'3.8\'\r\nservices:\r\n  booking-service:\r\n    build:\r\n      context: ./BookingService\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - "5001:8080"\r\n    environment:\r\n      - ASPNETCORE_ENVIRONMENT=Development\r\n      - ConnectionStrings__DefaultConnection=Server=booking-db;Database=BookingDB;User Id=sa;Password=YourPassword123!;TrustServerCertificate=true\r\n      - Services__RoomService__BaseUrl=http://room-service:8080\r\n    depends_on:\r\n      - booking-db\r\n      - room-service\r\n\r\n  room-service:\r\n    build:\r\n      context: ./RoomService\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - "5002:8080"\r\n    environment:\r\n      - ASPNETCORE_ENVIRONMENT=Development\r\n      - ConnectionStrings__DefaultConnection=Server=room-db;Database=RoomDB;User Id=sa;Password=YourPassword123!;TrustServerCertificate=true\r\n    depends_on:\r\n      - room-db\r\n\r\n  customer-service:\r\n    build:\r\n      context: ./CustomerService\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - "5003:8080"\r\n    environment:\r\n      - ASPNETCORE_ENVIRONMENT=Development\r\n      - ConnectionStrings__DefaultConnection=Server=customer-db;Database=CustomerDB;User Id=sa;Password=YourPassword123!;TrustServerCertificate=true\r\n    depends_on:\r\n      - customer-db\r\n\r\n  booking-db:\r\n    image: mcr.microsoft.com/mssql/server:2022-latest\r\n    environment:\r\n      - ACCEPT_EULA=Y\r\n      - SA_PASSWORD=YourPassword123!\r\n    ports:\r\n      - "1433:1433"\r\n\r\n  room-db:\r\n    image: mcr.microsoft.com/mssql/server:2022-latest\r\n    environment:\r\n      - ACCEPT_EULA=Y\r\n      - SA_PASSWORD=YourPassword123!\r\n    ports:\r\n      - "1434:1433"\r\n\r\n  customer-db:\r\n    image: mcr.microsoft.com/mssql/server:2022-latest\r\n    environment:\r\n      - ACCEPT_EULA=Y\r\n      - SA_PASSWORD=YourPassword123!\r\n    ports:\r\n      - "1435:1433"\r\n\r\nnetworks:\r\n  default:\r\n    name: hotel-management-network\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var o=r(6540);const i={},t=o.createContext(i);function s(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);